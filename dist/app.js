let i=0,n=!1;document.body.insertAdjacentHTML("afterend",'<dialog id="stop-netflix-overlay">This is a dialog.<br><button>Close</button></dialog>');const r=o=>{const e=document.querySelector("#stop-netflix-overlay");e.querySelector("button").addEventListener("click",function(){e.close(),o.play()}),e.showModal()},l=o=>{const e=new window.VideoBridge(o);setInterval(()=>{e.isPlaying()&&(i++,console.log("watched triggered"),e.isInTheMiddle()&&i>1&&!n&&(r(e),e.stop(),n=!0))},1e3)},d=new MutationObserver(o=>o.forEach(({addedNodes:e})=>e.forEach(t=>{t.querySelector("video")&&(l(t.querySelector("video")),d.disconnect())})));d.observe(document.body,{childList:!0,subtree:!0});
